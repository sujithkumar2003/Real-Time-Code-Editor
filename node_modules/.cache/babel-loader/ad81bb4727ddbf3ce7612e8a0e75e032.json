{"ast":null,"code":"import _asyncToGenerator from\"E:/Real-Time-Code-Editor/realtime-code-editor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/Real-Time-Code-Editor/realtime-code-editor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\Real-Time-Code-Editor\\\\realtime-code-editor\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useRef,useState}from\"react\";import Codemirror from\"codemirror\";import\"codemirror/lib/codemirror.css\";import\"codemirror/theme/dracula.css\";import\"codemirror/mode/javascript/javascript\";import\"codemirror/mode/htmlmixed/htmlmixed\";import\"codemirror/mode/python/python\";import\"codemirror/mode/css/css\";import\"codemirror/addon/edit/closetag\";import\"codemirror/addon/edit/closebrackets\";import\"codemirror/addon/edit/matchbrackets\";import\"codemirror/addon/hint/show-hint\";import\"codemirror/addon/hint/javascript-hint\";import\"codemirror/addon/hint/html-hint\";import\"codemirror/addon/hint/css-hint\";import\"codemirror/addon/hint/show-hint.css\";import ACTIONS from\"../Actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Editor=function Editor(_ref){var socketRef=_ref.socketRef,roomId=_ref.roomId,onCodeChange=_ref.onCodeChange;var _useState=useState(\"htmlmixed\"),_useState2=_slicedToArray(_useState,2),selectedMode=_useState2[0],setSelectedMode=_useState2[1];var editorRef=useRef(null);useEffect(function(){function init(){return _init.apply(this,arguments);}function _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:editorRef.current=Codemirror.fromTextArea(document.getElementById(\"realtimeEditor\"),{mode:selectedMode,theme:\"dracula\",autoCloseTags:true,autoCloseBrackets:true,lineNumbers:true,matchBrackets:true,extraKeys:{\"Ctrl-Space\":\"autocomplete\"},hintOptions:{completeSingle:false}});editorRef.current.on(\"change\",function(instance,changes){var origin=changes.origin;var code=instance.getValue();onCodeChange(code);if(origin!==\"setValue\"){socketRef.current.emit(ACTIONS.CODE_CHANGE,{roomId:roomId,code:code});}});editorRef.current.on(\"inputRead\",function(cm,change){if(change.text.length===1&&/^[a-zA-Z0-9_-]$/.test(change.text[0])&&!cm.state.completionActive){cm.showHint();}else if(change.text[0]===\"!\"){cm.setValue(\"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title>My HTML Page</title>\\n  <link rel=\\\"stylesheet\\\" href=\\\"styles.css\\\">\\n</head>\\n<body>\\n  <script src=\\\"script.js\\\"></script>\\n</body>\\n</html>\");cm.setCursor({line:5,ch:2});}});editorRef.current.on(\"keyup\",function(cm,event){if(event.key===\".\"){cm.showHint();}});case 4:case\"end\":return _context.stop();}}},_callee);}));return _init.apply(this,arguments);}init();},[selectedMode]);useEffect(function(){if(socketRef.current){socketRef.current.on(ACTIONS.CODE_CHANGE,function(_ref2){var code=_ref2.code;if(code!==null){editorRef.current.setValue(code);}});}return function(){socketRef.current.off(ACTIONS.CODE_CHANGE);};},[socketRef]);var handleModeChange=function handleModeChange(e){var mode=e.target.value;setSelectedMode(mode);editorRef.current.setOption(\"mode\",mode);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedMode,onChange:handleModeChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"htmlmixed\",children:\"HTML\"}),/*#__PURE__*/_jsx(\"option\",{value:\"python\",children:\"Python\"})]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"realtimeEditor\"})]});};export default Editor;","map":{"version":3,"sources":["E:/Real-Time-Code-Editor/realtime-code-editor/src/components/Editor.js"],"names":["React","useEffect","useRef","useState","Codemirror","ACTIONS","Editor","socketRef","roomId","onCodeChange","selectedMode","setSelectedMode","editorRef","init","current","fromTextArea","document","getElementById","mode","theme","autoCloseTags","autoCloseBrackets","lineNumbers","matchBrackets","extraKeys","hintOptions","completeSingle","on","instance","changes","origin","code","getValue","emit","CODE_CHANGE","cm","change","text","length","test","state","completionActive","showHint","setValue","setCursor","line","ch","event","key","off","handleModeChange","e","target","value","setOption"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport Codemirror from \"codemirror\";\r\nimport \"codemirror/lib/codemirror.css\";\r\nimport \"codemirror/theme/dracula.css\";\r\nimport \"codemirror/mode/javascript/javascript\";\r\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\r\nimport \"codemirror/mode/python/python\";\r\nimport \"codemirror/mode/css/css\";\r\nimport \"codemirror/addon/edit/closetag\";\r\nimport \"codemirror/addon/edit/closebrackets\";\r\nimport \"codemirror/addon/edit/matchbrackets\";\r\nimport \"codemirror/addon/hint/show-hint\";\r\nimport \"codemirror/addon/hint/javascript-hint\";\r\nimport \"codemirror/addon/hint/html-hint\";\r\nimport \"codemirror/addon/hint/css-hint\";\r\nimport \"codemirror/addon/hint/show-hint.css\";\r\n\r\nimport ACTIONS from \"../Actions\";\r\n\r\nconst Editor = ({ socketRef, roomId, onCodeChange }) => {\r\n  const [selectedMode, setSelectedMode] = useState(\"htmlmixed\");\r\n  const editorRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    async function init() {\r\n      editorRef.current = Codemirror.fromTextArea(\r\n        document.getElementById(\"realtimeEditor\"),\r\n        {\r\n          mode: selectedMode,\r\n          theme: \"dracula\",\r\n          autoCloseTags: true,\r\n          autoCloseBrackets: true,\r\n          lineNumbers: true,\r\n          matchBrackets: true,\r\n          extraKeys: { \"Ctrl-Space\": \"autocomplete\" },\r\n          hintOptions: {\r\n            completeSingle: false,\r\n          },\r\n        }\r\n      );\r\n\r\n      editorRef.current.on(\"change\", (instance, changes) => {\r\n        const { origin } = changes;\r\n        const code = instance.getValue();\r\n        onCodeChange(code);\r\n        if (origin !== \"setValue\") {\r\n          socketRef.current.emit(ACTIONS.CODE_CHANGE, {\r\n            roomId,\r\n            code,\r\n          });\r\n        }\r\n      });\r\n\r\n      editorRef.current.on(\"inputRead\", function (cm, change) {\r\n        if (\r\n          change.text.length === 1 &&\r\n          /^[a-zA-Z0-9_-]$/.test(change.text[0]) &&\r\n          !cm.state.completionActive\r\n        ) {\r\n          cm.showHint();\r\n        } else if (change.text[0] === \"!\") {\r\n          cm.setValue(\r\n            `<!DOCTYPE html>\\n<html lang=\"en\">\\n<head>\\n  <meta charset=\"UTF-8\">\\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n  <title>My HTML Page</title>\\n  <link rel=\"stylesheet\" href=\"styles.css\">\\n</head>\\n<body>\\n  <script src=\"script.js\"></script>\\n</body>\\n</html>`\r\n          );\r\n          cm.setCursor({ line: 5, ch: 2 });\r\n        }\r\n      });\r\n\r\n      editorRef.current.on(\"keyup\", function (cm, event) {\r\n        if (event.key === \".\") {\r\n          cm.showHint();\r\n        }\r\n      });\r\n    }\r\n    init();\r\n  }, [selectedMode]);\r\n\r\n  useEffect(() => {\r\n    if (socketRef.current) {\r\n      socketRef.current.on(ACTIONS.CODE_CHANGE, ({ code }) => {\r\n        if (code !== null) {\r\n          editorRef.current.setValue(code);\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      socketRef.current.off(ACTIONS.CODE_CHANGE);\r\n    };\r\n  }, [socketRef]);\r\n\r\n  const handleModeChange = (e) => {\r\n    const mode = e.target.value;\r\n    setSelectedMode(mode);\r\n    editorRef.current.setOption(\"mode\", mode);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <select value={selectedMode} onChange={handleModeChange}>\r\n        <option value=\"htmlmixed\">HTML</option>\r\n        <option value=\"python\">Python</option>\r\n      </select>\r\n      <textarea id=\"realtimeEditor\"></textarea>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Editor;\r\n"]},"metadata":{},"sourceType":"module"}